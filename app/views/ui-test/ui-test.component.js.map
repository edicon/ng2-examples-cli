{"version":3,"file":"ui-test.component.js","sourceRoot":"","sources":["ui-test.component.ts"],"names":[],"mappings":"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","sourcesContent":["import config from '../../conf';\nimport { Component, OnInit, EventEmitter, ElementRef, ChangeDetectorRef} from '@angular/core';\nimport { NgClass, Control, ControlGroup, FormBuilder, FORM_PROVIDERS, FORM_DIRECTIVES } from '@angular/common';\nimport { ButtonComponent } from '../../components/button/button.component';\nimport { ToggleComponent } from '../../components/toggle/toggle.component';\nimport { SliderComponent } from '../../components/slider/slider.component';\nimport { DataChannel } from '../../services/data-channel';\n\ndeclare let module: any;\n\n@Component({\n  selector: 'view',\n  moduleId: module.id,\n  templateUrl: 'ui-test.component.html',\n  styleUrls: ['ui-test.component.css'],\n  providers: [ FORM_PROVIDERS ],\n  directives: [ FORM_DIRECTIVES, SliderComponent, ButtonComponent, ToggleComponent ],\n})\n\nexport class UIComponentTest implements OnInit {\n  \n  copy: any;\n  sliderOptions: any;\n  joyOptions: any;\n  buttonOptions: any;\n  toggleOptions: any;\n  client: any;\n  isConnected: boolean;\n  isConnecting: boolean;\n  isButtonDisabled: boolean;\n  isInverted: boolean;\n  form: ControlGroup;\n  room: Control;\n  elem: any;\n  ref: any;\n  \n  constructor(private _el: ElementRef, \n              private _ref: ChangeDetectorRef,\n              private _fb: FormBuilder) {\n    \n    this.elem = _el.nativeElement;\n    this.ref = _ref;\n\n    this.isConnected = false;\n    this.isConnecting = false;\n    this.isButtonDisabled = true;\n    \n    \n    this.room = new Control('');\n    \n    this.form = _fb.group({\n      'room': this.room\n    });\n    \n    this.copy = {\n      headline : 'Remote Control',\n      line1: 'Visit /remote on desktop computer to get code'\n    };\n    \n    \n    this.toggleOptions = {\n        isActive: false,\n        position: 'absolute',\n        x: (206) + 'px',\n        y: window.innerHeight - 280 + 'px'\n    };\n    \n    \n    this.joyOptions = {\n      left: {\n        orient: 'is--joystick',\n        min: [-1.0,1.0],\n        max: [1.0,-1.0],\n        currentValue: [0,0],\n        onUpdate: new EventEmitter(),\n        position: 'absolute',\n        x: 14 + 'px',\n        y: window.innerHeight - 214 + 'px'\n      }, \n      right:  {\n        orient: 'is--joystick',\n        min: [(window.innerWidth / 2)*-1, (window.innerHeight / 2)*-1],\n        max: [(window.innerWidth / 2), (window.innerHeight / 2)],\n        currentValue: [0,0],\n        onUpdate: new EventEmitter(),\n        position: 'absolute',\n        x: window.innerWidth - 214 + 'px',\n        y: window.innerHeight - 214 + 'px'\n      }\n    };\n    \n    this.sliderOptions = {\n        orient: 'is--vert',\n        min: 12.0,\n        max: -12.0,\n        currentValue: 0,\n        onUpdate: new EventEmitter(),\n        position: 'absolute',\n        x: (14*2) + 200 + 'px',\n        y: window.innerHeight - 214 + 'px'\n    };\n    \n    console.log(config);\n    \n    \n  }\n  ngOnInit() {\n    \n    // this.client is undefined!\n    \n      this.form.valueChanges.subscribe((val) => {\n          console.log(JSON.stringify(val));\n         if(val.room.length === 5) {\n           this.isButtonDisabled = false;\n         } else {\n           this.isButtonDisabled = true;\n         }\n         \n      });\n    \n    \n     this.joyOptions.left.onUpdate.subscribe((val) => {\n      let msg = JSON.stringify({\n        currentValue: this.joyOptions.left.currentValue,\n        max: this.joyOptions.left.max,\n        min: this.joyOptions.left.min,\n        control: 'joyLeft'\n      });\n      if(this.client && this.client.channel) {\n         this.client.channel.send(msg);\n      }\n     });\n     \n     this.joyOptions.right.onUpdate.subscribe((val) => {\n      let msg = JSON.stringify({\n        currentValue: this.joyOptions.right.currentValue,\n        max: this.joyOptions.right.max,\n        min: this.joyOptions.right.min,\n        control: 'joyRight'\n      });\n\n      if(this.client && this.client.channel) {\n         this.client.channel.send(msg);\n      }\n\n     });\n     \n     this.sliderOptions.onUpdate.subscribe((val) => {\n      let msg = JSON.stringify({\n        currentValue: this.sliderOptions.currentValue,\n        max: this.sliderOptions.max,\n        min: this.sliderOptions.min,\n        control: 'slider'\n      });\n      if(this.client && this.client.channel) {\n         this.client.channel.send(msg);\n      }\n     });\n  }\n  onClick() {\n \n    if(!this.isConnected && !this.isButtonDisabled) {\n\n      this.client = new DataChannel(this.room.value, config.username, config.server);\n      this.isConnecting = true;\n      \n      this.client.emitter.subscribe((message)=>{\n        console.log('hello!', message);\n           \n        if(message === 'open') {\n          this.isConnected = true;\n          this.isConnecting = false;\n          this.client.observer.subscribe((res)=>{\n\n            console.log(res);\n            \n          });\n          \n          this.ref.detectChanges();\n  \n        }\n\n      });\n\n    }\n  }\n  \n  onToggle() {\n    this.toggleOptions.isActive = !this.toggleOptions.isActive ? true : false;\n    \n    let msg = JSON.stringify({\n        currentValue: this.toggleOptions.isActive,\n        control: 'toggle'\n      });\n      \n      if(this.client && this.client.channel) {\n         this.client.channel.send(msg);\n      }\n      \n  }\n  \n}\n"]}