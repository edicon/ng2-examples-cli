{"version":3,"file":"track-list.component.js","sourceRoot":"","sources":["track-list.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAA2E,eAAe,CAAC,CAAA;AAE3F,qCAA0B,oCAAoC,CAAC,CAAA;AAmB/D;IASE,mBAAoB,EAAc;QAAd,OAAE,GAAF,EAAE,CAAY;QAEhC,IAAI,CAAC,QAAQ,GAAG,IAAI,mBAAY,EAAE,CAAC;QACnC,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,aAAa,CAAC;IAE/B,CAAC;IAED,4BAAQ,GAAR,UAAS,KAAW;QAApB,iBA8BC;QA5BE,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAE1B,UAAU,CAAC;YAER,IAAI,IAAI,GAAG,KAAI,CAAC;YAChB,IAAI,IAAI,GAAG,EAAE,CAAC;YACd,IAAI,KAAK,GAAG,KAAI,CAAC,IAAI,CAAC,SAAS,CAAC;YAChC,IAAI,GAAG,GAAG,KAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;YAC/D,IAAI,EAAE,GAAG;gBAEN,EAAE,CAAA,CAAC,KAAK,IAAI,GAAG,CAAC,CAAC,CAAC;oBAEhB,MAAM,CAAC;gBAET,CAAC;gBAAC,IAAI,CAAC,CAAC;oBAEL,KAAK,IAAI,IAAI,CAAC;oBACd,KAAI,CAAC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;oBAC5B,MAAM,CAAC,qBAAqB,CAAC,EAAE,CAAC,CAAC;gBAEpC,CAAC;YAEJ,CAAC,CAAC;YAEF,MAAM,CAAC,qBAAqB,CAAC,EAAE,CAAC,CAAC;QAEpC,CAAC,EAAC,GAAG,CAAC,CAAC;IAEV,CAAC;IAED,4BAAQ,GAAR;QAAA,iBAMC;QAJC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,UAAC,OAAO;YAC7B,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC;IAEL,CAAC;IAED,2BAAO,GAAP,UAAQ,KAAY;QAElB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAE5B,CAAC;IAED,8BAAU,GAAV,UAAW,KAAW;QAEpB,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,GAAG,KAAK,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;YACxE,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAED,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC;IAE7C,CAAC;IAjED;QAAC,YAAK,EAAE;;gDAAA;IACR;QAAC,YAAK,EAAE;;8CAAA;IACR;QAAC,aAAM,EAAE;;+CAAA;IArBX;QAAC,gBAAS,CAAC;YACT,QAAQ,EAAE,YAAY;YACtB,QAAQ,EAAE,qKAMX;YACC,QAAQ,EAAE,MAAM,CAAC,EAAE;YACnB,SAAS,EAAE,CAAC,0BAA0B,CAAC;YACvC,UAAU,EAAE,CAAC,gCAAS,CAAC;SACxB,CAAC;;iBAAA;IA0EF,gBAAC;AAAD,CAAC,AAxED,IAwEC;AAxEY,iBAAS,YAwErB,CAAA","sourcesContent":["import { Component, EventEmitter, Input, Output, ElementRef, OnInit } from '@angular/core';\nimport { Media } from \"../../schema/media\";\nimport { TrackItem } from '../track-item/track-item.component';\n\ndeclare let module: any;\n\n\n@Component({\n  selector: 'track-list',\n  template: `\n  <track-item *ngFor=\"let track of trackList\"\n   [track]=\"track\"\n   (click)='clicked(track)'\n   [class.selected]=\"isSelected(track)\">\n  </track-item>\n`,\n  moduleId: module.id,\n  styleUrls: ['track-list.component.css'],\n  directives: [TrackItem]\n})\n\nexport class TrackList implements OnInit {\n  \n  currentTrack: Media;\n  elem: any;\n  \n  @Input() trackList: Media[]; \n  @Input() control: EventEmitter<any>; \n  @Output() onselect: EventEmitter<any>;\n  \n  constructor(private el: ElementRef) {\n    \n    this.onselect = new EventEmitter();\n    this.elem = el.nativeElement;\n    \n  }\n  \n  setTrack(track:Media): void {\n    \n     this.currentTrack = track;\n     \n     setTimeout(()=>{ // TODO: figure out better way than setTimeout\n       \n        var self = this;\n        var mult = 10;\n        var frame = this.elem.scrollTop;\n        var end = this.elem.querySelectorAll('.selected')[0].offsetTop;\n        var cb = () => {\n  \n           if(frame >= end) {\n             \n             return;\n          \n           } else {\n             \n              frame += mult;\n              this.elem.scrollTop = frame;\n              window.requestAnimationFrame(cb);\n      \n           }\n\n        };\n        \n        window.requestAnimationFrame(cb);\n \n     },100);\n    \n  }\n  \n  ngOnInit() {\n    \n    this.control.subscribe((control)=>{\n      this.setTrack(control.track);\n    });\n    \n  }\n\n  clicked(track: Media): void {\n\n    this.onselect.emit(track);\n    \n  }\n\n  isSelected(track:Media): boolean {\n    \n    if (!track || !this.currentTrack || this.currentTrack.url !== track.url) {\n      return false;\n    }\n\n    return track.url === this.currentTrack.url;\n\n  }\n\n}\n"]}