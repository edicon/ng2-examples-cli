{"version":3,"file":"synth.scene.js","sourceRoot":"","sources":["synth.scene.ts"],"names":[],"mappings":"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","sourcesContent":["import { RuttEtraShader } from './rutt.shader';\n\ndeclare let THREE: any;\ndeclare let navigator: any;\n\nexport class Synth {\n  clock: any;\n  control: any; // TODO: expecting in constructor\n  cam: any; // TODO: expecting in constructor\n  container: any; // TODO: expecting in constructor\n  camera: any;\n  scene: any;\n  renderer: any;\n  texture: any;\n  material: any;\n  mesh: any;\n  geometry: any;\n  detail: number = 480;\n  hd: boolean = true;\n  back: any;\n  fill: any;\n  key: any;\n  composer: any;\n  renderModel: any;\n  effectBloom: any;\n  effectHue: any;\n  effectCopy: any;\n  mouseX: number = 0;\n  mouseY: number = 0;\n  windowHalfX: number; //window.innerWidth / 2;\n  windowHalfY: number; //window.innerHeight / 2;\n  videoPlayer: any; //document.getElementById('videoplayer');\n  videoInput: any; //document.getElementById('video');\n  //videoInput.current = 0;\n  vendorURL: any; //window.URL || window.webkitURL;\n  videoObject: any;\n  videoisplaying: boolean = false;\n  vplaylist: any[];\n  aplaylist: any[];\n  audioin: boolean = false;\n  audioContext: any; //new webkitAudioContext();\n  //audioContext.fftSize = 1024;\n  //  gainNode = audioContext.createGain();\n  //  audioAnalyzer = audioContext.createAnalyser();\n  audioSource: any;\n  //freqBars = document.getElementsByClassName('audio-input');\n  //audioInput = document.getElementById('audio');\n  //audioInput.current = 0;\n  audioisplaying: boolean = false;\n  videoStream: any;\n  audioStream: any;\n  //frequencyData = new Uint8Array(audioAnalyzer.frequencyBinCount);\n  //console.log(audioAnalyzer, frequencyData);\n  // dropZone = document.getElementById('drop_zone');\n  // readFiles = document.getElementById('read_files');\n  // dropZoneVideo = document.getElementById('video_drop');\n  // readFilesVideo = document.getElementById('read_video');\n  webcam: boolean = false;\n  guiSetup: boolean = false;\n  initComplete: boolean = false;\n  menusEnabled: boolean = true;\n  controls: boolean = false;\n  pointer: any[];\n  setting: any[];\n  trigger: boolean = false;\n  mousex: number; //that.mouseX;\n  mousey: number; //that.mouseY;\n  shape: string = '';\n  meshUpdate: boolean = false;\n  wireframe: boolean = false;\n  videoMaterial: any;\n  camerax: number = 0.0;\n  cameray: number = -1130.0;\n  cameraz: number = 1680.0;\n  scale: number = 5.0;\n  multiplier: number = 1.0;\n  displace: number = 1.0;\n  transparency: any = 0.8;\n  originArray : number[];\n  originX: any = 0.0;\n  originY: any = 0.0;\n  originZ: any = -2000.0;\n  hue: number = 0;\n  saturation: number = 0.9;\n  bgColor: string = '#000000';\n  guiContainer: any;\n  originPos : string;\n  cameraPos : string\n  multiply : number;\n  displacement : number;\n  opacity : any = 1;\n  bg : string;\n  //setting.current = 0;\n  presets: any[] = [];\n  config: any;\n  elem: any;\n\n  constructor(private _video: any, \n              private _control: any,\n              private _cam: any,\n              private _json: any) {\n\n    this.videoInput = _video;\n    this.cam = _cam;\n    this.control = _control;\n    this.mouseX = this.mousex = 0;\n    this.mouseY = this.mousey = 0;\n    this.windowHalfX = window.innerWidth / 2;\n    this.windowHalfY = window.innerHeight / 2;\n    this.vendorURL = window.URL;\n\n    this.config = _json;\n\n    this.init(_json);\n\n\n  }\n\n  init(_conf: any) {\n    \n    var that = this;\n    \n    this.clock = new THREE.Clock();\n    \n    this.camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 1, 10000);\n    this.scene = new THREE.Scene();\n    \n    this.texture = new THREE.Texture(this.videoInput);\n    this.texture.minFilter = THREE.LinearFilter;\n    this.texture.magFilter = THREE.LinearFilter;\n    this.texture.format = THREE.RGBFormat;\n    this.texture.generateMipmaps = true;\n\n    this.videoMaterial = new THREE.ShaderMaterial({\n      uniforms: {\n        \"tDiffuse\": {\n          type: \"t\",\n          value: this.texture\n        },\n        \"multiplier\": {\n          type: \"f\",\n          value: this.multiplier\n        },\n        \"displace\": {\n          type: \"f\",\n          value: this.displace\n        },\n        \"opacity\": {\n          type: \"f\",\n          value: this.opacity\n        },\n        \"originX\": {\n          type: \"f\",\n          value: this.originX\n        },\n        \"originY\": {\n          type: \"f\",\n          value: this.originY\n        },\n        \"originZ\": {\n          type: \"f\",\n          value: this.originZ\n        }\n      },\n      vertexShader: RuttEtraShader.vertexShader,\n      fragmentShader: RuttEtraShader.fragmentShader,\n      depthWrite: true,\n      depthTest: true,\n      wireframe: this.wireframe,\n      transparent: true,\n      overdraw: false\n    });\n    \n    this.videoMaterial.renderToScreen = false;\n   \n    \n    // this.fill = new THREE.AmbientLight(0xffffff); // soft white light\n    // this.scene.add(this.fill);\n\n    this.key = new THREE.DirectionalLight(0xffffff);\n    this.key.position.set(0, -100, 100).normalize();\n\n    this.key.intensity = 0.3;\n    this.key.castShadow = true;\n    this.scene.add(this.key);\n   \n\n    this.fill = new THREE.DirectionalLight(0xffffff);\n    this.fill.position.set(0, 100, 100).normalize();\n   \n    this.fill.intensity = 0.1;\n    this.fill.castShadow = true;\n    this.scene.add(this.fill);\n   \n    \n    this.renderer = new THREE.WebGLRenderer({antialias: true});\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n    this.renderer.shadowMap.enabled = true;\n    this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n    this.renderer.autoClear = false;\n    \n    // var size = 10;\n    // var step = 1;\n\n    // var gridHelper = new THREE.GridHelper( size, step );\n    // this.scene.add( gridHelper );\n    \n    \n    Promise.all([\n      \n      System.import('/vendor/three/examples/js/shaders/CopyShader.js'),\n      System.import('/vendor/three/examples/js/shaders/ConvolutionShader.js'),\n      System.import('/vendor/three/examples/js/shaders/BokehShader.js'),\n      System.import('/vendor/three/examples/js/shaders/HueSaturationShader.js'),\n      System.import('/vendor/three/examples/js/postprocessing/EffectComposer.js')\n    ]).then(function(){\n      \n      return Promise.all([\n      System.import('/vendor/three/examples/js/postprocessing/MaskPass.js'),\n      System.import('/vendor/three/examples/js/postprocessing/RenderPass.js'),\n      System.import('/vendor/three/examples/js/postprocessing/ShaderPass.js'),\n      System.import('/vendor/three/examples/js/postprocessing/BloomPass.js')]);\n      \n    }).then(function(){\n      \n      //postprocessing\n      that.composer = new THREE.EffectComposer(that.renderer);\n\n      that.renderModel = new THREE.RenderPass(that.scene, that.camera);\n      that.composer.addPass(that.renderModel);\n      \n      //that.effectBloom = new THREE.BloomPass(3.3, 20, 4.0, 256);\n      //that.effectBloom = new THREE.BloomPass(1.5, 5.0, 2.4, 256);\n      //that.composer.addPass(that.effectBloom);\n\n      that.effectHue = new THREE.ShaderPass(THREE.HueSaturationShader);\n      that.effectHue.renderToScreen = true;\n      that.composer.addPass(that.effectHue);   \n          \n      that.setDefaults(_conf, 0);\n      that.initComplete = true;\n      \n    });\n\n    window.addEventListener('resize', this.onResize.bind(this), false);\n    document.addEventListener('mousemove', this.onDocumentMouseMove.bind(this), false);\n     \n  }\n  \n  update() {\n\n    window.requestAnimationFrame(this.update.bind(this));\n    this.render();\n\n  }\n    \n  \n render() {\n\n    let delta = this.clock.getDelta();\n    \n    if (this.videoInput.readyState === 4) {\n      if (this.texture) this.texture.needsUpdate = true;\n      if (this.videoMaterial) this.videoMaterial.needsUpdate = true;\n    }\n\n    this.camera.lookAt(this.scene.position);\n\n         \n    if( this.composer !== undefined ) {\n      this.composer.render(delta);\n    } else {\n      this.renderer.render(this.scene, this.camera);\n    }\n\n  }\n  \n  meshChange (shape, x, s) {\n        var that = this;\n        that.shape = shape;\n        \n        if (x === null || x === undefined) {\n          x = 64;\n        }\n        if (s === null || s === undefined) {\n          s = 64;\n        }\n\n        if (x >= 480) {\n          x = 480;\n          //$('input#detail_value').val(480);\n        } else {\n          //$('input#detail_value').val(that.detail);\n        }\n        if (s >= 480) {\n          s = 480;\n        }\n\n        if (that.meshUpdate === true) {\n          that.geometry.verticesNeedUpdate = false;\n          that.geometry.dynamic = false;\n          that.geometry = null;\n          that.videoMaterial.renderToScreen = false;\n          that.scene.remove(that.mesh);\n        }\n\n        switch (shape) {\n          case 'plane':\n            if (that.hd === true) {\n              var y = (9 * x) / 16;\n              that.geometry = new THREE.PlaneGeometry(x, x, y, y);\n            } else {\n              that.geometry = new THREE.PlaneGeometry(x, s, x, s);\n            }\n            that.mesh = new THREE.Mesh(that.geometry, that.videoMaterial);\n            break;\n\n          case 'sphere':\n            that.geometry = new THREE.SphereGeometry(x, s, s);\n            that.mesh = new THREE.Mesh(that.geometry, that.videoMaterial);\n\n            break;\n\n          case 'cube':\n            if (x > 60 || s > 60) {\n              x = s = 60;\n            }\n            that.geometry = new THREE.BoxGeometry(x, x, x, s, s, s);\n            that.mesh = new THREE.Mesh(that.geometry, that.videoMaterial);\n            break;\n\n          case 'cylinder':\n            that.geometry = new THREE.CylinderGeometry(that.scale * 2.0, that.scale * 2.0, x * 8.0, s, x, false);\n            that.mesh = new THREE.Mesh(that.geometry, that.videoMaterial);\n            break;\n\n          case 'torus':\n            that.geometry = new THREE.TorusGeometry(that.scale, x, x, x);\n            that.mesh = new THREE.Mesh(that.geometry, that.videoMaterial);\n            break;\n\n          case 'ring':\n            that.geometry = new THREE.RingGeometry(x, x, s, s);\n            that.mesh = new THREE.Mesh(that.geometry, that.videoMaterial);\n            break;\n\n          case 'tetra':\n            that.geometry = new THREE.TetrahedronGeometry(x, s);\n            that.mesh = new THREE.Mesh(that.geometry, that.videoMaterial);\n            break;\n\n          case 'octa':\n            that.geometry = new THREE.OctahedronGeometry(x, s);\n            that.mesh = new THREE.Mesh(that.geometry, that.videoMaterial);\n            break;\n\n          case 'poly':\n            that.geometry = new THREE.PolyhedronGeometry(x, s, that.scale, that.scale);\n            that.mesh = new THREE.Mesh(that.geometry, that.videoMaterial);\n            break;\n\n          default:\n            if (that.hd === true) {\n              var y = (9 * x) / 16;\n              that.geometry = new THREE.PlaneGeometry(x, x, y, y);\n            } else {\n              that.geometry = new THREE.PlaneGeometry(x, s, x, s);\n            }\n            that.mesh = new THREE.Mesh(that.geometry, that.videoMaterial);\n\n        }\n        \n        that.key.target = that.mesh;\n        that.fill.target = that.mesh;\n        that.meshUpdate = true;\n        that.scene.add(that.mesh);\n        that.mesh.doubleSided = true;\n        that.mesh.position.x = that.mesh.position.y = that.mesh.position.z = 0.0;\n        that.mesh.scale.x = that.mesh.scale.y = that.mesh.scale.z = that.scale;\n        that.mesh.castShadow = true;\n        that.geometry.dynamic = true;\n        that.geometry.verticesNeedUpdate = true;\n        that.videoMaterial.renderToScreen = true;\n\n  }\n  \n  removeMesh (mesh) {\n    this.scene.remove(mesh);\n  }\n\n  addMesh (mesh) {\n    this.scene.add(mesh);\n  }\n  \n  setParams() {\n    \n    this.videoMaterial.uniforms[\"displace\"].value = this.displacement;\n    this.videoMaterial.uniforms[\"multiplier\"].value = this.multiply;\n    this.videoMaterial.uniforms[\"opacity\"].value = parseFloat(this.opacity);\n    this.videoMaterial.uniforms[\"originX\"].value = parseFloat(this.originX);\n    this.videoMaterial.uniforms[\"originY\"].value = parseFloat(this.originY);\n    this.videoMaterial.uniforms[\"originZ\"].value = parseFloat(this.originZ);\n\n    \n    this.effectHue.uniforms['hue'].value = this.hue;\n    this.effectHue.uniforms['saturation'].value = this.saturation;\n\n    this.renderer.setClearColor(parseInt(this.bg.replace('#', '0x')), 1.0);\n    \n  }\n  \n  setDefaults( _conf: any, _index: number ) {\n    \n    let json = _conf[_index];\n    let origin = json.origin.split(',');\n    let coords = json.camera.split(',');\n\n    this.originX = parseFloat(origin[0]);\n    this.originY = parseFloat(origin[1]);\n    this.originZ = parseFloat(origin[2]);\n    this.camera.position.x = parseFloat(coords[0]);\n    this.camera.position.y = parseFloat(coords[1]);\n    this.camera.position.z = parseFloat(coords[2]);\n    this.scale = json.scale;\n    this.multiply = json.multiplier;\n    this.displacement = json.displace;\n    this.opacity = json.opacity;\n    this.saturation = json.saturation;\n    this.hue = json.hue;\n    this.bg = json.bgColor;\n    this.detail = json.detail;\n    this.wireframe = json.wireframe;\n    \n    this.meshChange(json.shape, json.detail, json.detail);\n    this.setParams();\n    \n  }\n  \n  defaultVideo ( url: string ) {\n\n    this.videoInput.setAttribute('src', url);\n    this.videoInput.load();\n    this.videoInput.loop = true;\n  \n  }\n  \n  playVideo ( playlistId : number ) {\n\n    this.webcam = false;\n    this.videoInput.pause();\n    this.videoisplaying = false;\n    this.videoInput.src = this.vplaylist[playlistId];\n    this.videoInput.muted = true;\n    this.videoInput.play();\n    this.videoisplaying = true;\n\n  }\n  \n  streamVideo (stream : any) {\n    \n    this.webcam = true;\n    this.videoObject = this.vendorURL.createObjectURL(stream);\n    this.videoInput.src = this.videoObject;\n    \n  }\n  \n  initStream () {\n  \n    var that = this;\n    var message = '';\n    \n    console.log('init Webcam!');\n    //if (Modernizr.getusermedia && that.res.browser !== 'firefox') {\n      navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n      navigator.getUserMedia({\n        video: true,\n        audio: false\n      }, function(stream) {\n        //on webcam enabled\n        if (navigator.mozGetUserMedia) {\n          that.videoInput.mozSrcObject = stream;\n        } else {\n          that.videoStream = stream;\n          //that.streamVideo(that.videoStream);\n          //that.createWebcamItem();\n        }\n\n      }, function(error) {\n        message = 'Unable to capture WebCam. Please reload the page or try with Google Chrome.';\n      });\n      navigator.getUserMedia({\n        video: false,\n        audio: true\n      }, function(stream) {\n        //on webcam enabled\n        if (navigator.mozGetUserMedia) {\n          that.videoInput.mozSrcObject = stream;\n        } else {\n          that.audioStream = stream;\n          //that.createAudioItem();\n        }\n\n      }, function(error) {\n        message = 'Unable to capture audio input. Please reload the page or try with Google Chrome.';\n      });\n\n\n   // } \n\n    // if (this.webcam === false) {\n    //   this.playVideo(0);\n    // }\n    \n  }\n     \n  onResize() {\n    this.camera.aspect = window.innerWidth / window.innerHeight;\n    this.camera.updateProjectionMatrix();\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n    this.composer.reset();\n  }\n  \n  onDocumentMouseMove( event : any ) {\n    this.mouseX = (event.clientX - this.windowHalfX);\n    this.mouseY = (event.clientY - this.windowHalfY) * 0.3;\n  }\n\n  setContainer( elem: any ) {\n\n    this.elem = elem;\n    this.elem.appendChild(this.renderer.domElement);\n\n  }\n\n\n}"]}